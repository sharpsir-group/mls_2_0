# Запрос на бюджет: MLS Data Platform на базе Databricks

**Дата:** 8 декабря 2024  
**Подготовил:** Технический отдел  
**Регион размещения:** AWS Frankfurt (eu-central-1)

---

## 1. Краткое описание проекта

### Цель
Создание централизованной платформы данных недвижимости (MLS — Multiple Listing Service) для агрегации, стандартизации и предоставления данных о недвижимости в соответствии с международным стандартом **RESO Data Dictionary 2.0**.

### Текущий статус
Платформа разработана и протестирована на бесплатной версии Databricks Community Edition. Для промышленной эксплуатации требуется переход на платный тариф.

---

## 2. Объёмы данных

### 2.1 Текущие объёмы (Bronze Layer — сырые данные)

| Таблица | Записей | Описание |
|---------|---------|----------|
| properties | 14,066 | Объекты недвижимости |
| property_media | 168,987 | Фотографии и медиа |
| contacts | 41,502 | Контакты клиентов |
| opportunities | 37,821 | Сделки и возможности |
| projects | 2,095 | Девелоперские проекты |
| agents | 55 | Агенты |
| users | 69 | Пользователи системы |
| property_viewings | 389 | Просмотры объектов |
| locations | 647 | Локации (внутренние) |
| bayut_locations | 14,298 | Локации Bayut (ОАЭ) |
| spitogatos_locations | 15,999 | Локации Spitogatos (Греция) |
| property_finder_ae_locations | 10,049 | Локации Property Finder (ОАЭ) |
| bazaraki_locations | 661 | Локации Bazaraki (Кипр) |
| property_types | 11 | Типы недвижимости |
| property_subtypes | 43 | Подтипы недвижимости |
| project_features | 31 | Характеристики проектов |
| media_categories | 59 | Категории медиа |
| **Итого** | **~306,000** | |

### 2.2 Объём хранения

| Слой данных | Записей | Объём |
|-------------|---------|-------|
| Bronze (сырые данные) | ~306,000 | ~500 МБ |
| Silver (очищенные данные) | ~270,000 | ~400 МБ |
| Gold (RESO стандарт) | ~225,000 | ~300 МБ |
| **Всего** | | **~1.2 ГБ** |

### 2.3 Динамика изменений (CDC — Change Data Capture)

На основе анализа инкрементальных синхронизаций:

| Сущность | Изменений/день | Комментарий |
|----------|----------------|-------------|
| Объекты недвижимости | 75-150 | Новые, обновлённые, снятые с продажи |
| Контакты | 40-80 | Новые клиенты, обновления |
| Сделки (opportunities) | 300-600 | Высокая активность |
| Просмотры | 5-20 | Записи показов |
| Пользователи | 2-10 | Редкие изменения |
| **Итого изменений/день** | **~500-1,000** | |

---

## 3. Источники оценки

### 3.1 Методология

Оценка бюджета основана на:

1. **Реальные данные** — объёмы получены из работающей системы (CDC синхронизация с Qobrix CRM)
2. **Замеры производительности** — тестирование API показало:
   - Время запроса: 800-1200 мс на batch 1000 записей
   - Пропускная способность: 800-1000 объектов/сек
3. **Прогнозируемая нагрузка**:
   - CDC синхронизации: 4-6 раз в день
   - API запросы (Power BI, интеграции): 100-500 в день
   - ETL пайплайны: Bronze → Silver → Gold

### 3.2 Расчёт DBU (Databricks Units)

| Операция | Частота | DBU/операция | DBU/месяц |
|----------|---------|--------------|-----------|
| CDC Bronze (загрузка из API) | 6x/день | 2 DBU | 360 DBU |
| Silver ETL (трансформации) | 6x/день | 1 DBU | 180 DBU |
| Gold ETL (RESO маппинг) | 6x/день | 1 DBU | 180 DBU |
| SQL запросы (API, BI) | 500x/день | 0.1 DBU | 1,500 DBU |
| **Итого** | | | **~2,200 DBU/месяц** |

При средней нагрузке: **~200 DBU-часов/месяц**

---

## 4. Бюджет

### 4.1 Рекомендуемая конфигурация: Serverless SQL Warehouse

| Компонент | Использование | Цена за единицу | Стоимость/месяц |
|-----------|---------------|-----------------|-----------------|
| SQL Serverless DBU | 200 DBU-часов | \$0.70/DBU | \$140 |
| Jobs Compute (ETL) | 50 DBU-часов | \$0.25/DBU | \$12.50 |
| Storage (Delta Lake) | 5 ГБ | \$0.023/ГБ | \$0.12 |
| Data Transfer | 10 ГБ | \$0.09/ГБ | \$0.90 |
| **Итого** | | | **\$153.52** |

### 4.2 Годовой бюджет

| Сценарий | Месяц (USD) | Месяц (EUR) | Год (EUR) |
|----------|-------------|-------------|-----------|
| Минимальный | \$100 | €92 | €1,100 |
| **Рекомендуемый** | **\$155** | **€143** | **€1,716** |
| С запасом (+30%) | \$200 | €185 | €2,220 |

### 4.3 Запрашиваемый бюджет

| Период | Сумма (EUR) | Комментарий |
|--------|-------------|-------------|
| **Годовой бюджет** | **€2,000** | С учётом роста и резерва |
| Ежемесячный лимит | €170 | Мониторинг расходов |

---

## 5. Преимущества платформы

### 5.1 Бизнес-преимущества

| Преимущество | Описание |
|--------------|----------|
| **Единый источник данных** | Все данные о недвижимости в одном месте, исключение дублирования |
| **Стандартизация RESO** | Соответствие международному стандарту, упрощение интеграций |
| **Аналитика в реальном времени** | Power BI дашборды с актуальными данными |
| **Масштабируемость** | Готовность к росту объёмов без изменения архитектуры |
| **API для партнёров** | OAuth 2.0 защищённый доступ для внешних систем |

### 5.2 Технические преимущества

| Преимущество | Описание |
|--------------|----------|
| **Delta Lake** | ACID транзакции, версионирование, time travel |
| **Инкрементальная синхронизация** | CDC — только изменённые данные, экономия ресурсов |
| **Serverless** | Автомасштабирование, оплата только за использование |
| **Безопасность** | OAuth 2.0, JWT токены, шифрование данных |
| **OData 4.0 API** | Стандартный протокол, совместимость с BI инструментами |

### 5.3 Классификация недвижимости (PropertyClass)

Платформа поддерживает стандартную RESO классификацию:

| Код | Описание | Кол-во объектов |
|-----|----------|-----------------|
| RESI | Жилая недвижимость (продажа) | ~12,500 |
| RLSE | Жилая недвижимость (аренда) | ~39 |
| COMS | Коммерческая (продажа) | ~1,200 |
| COML | Коммерческая (аренда) | ~27 |
| LAND | Земельные участки | ~300 |

### 5.4 ROI (Возврат инвестиций)

| Фактор | Экономия/год |
|--------|--------------|
| Автоматизация синхронизации (vs ручной ввод) | ~200 часов × €30 = €6,000 |
| Единая отчётность (vs множество источников) | ~100 часов × €30 = €3,000 |
| Снижение ошибок интеграций | ~€2,000 |
| **Итого экономия** | **~€11,000/год** |
| **Затраты на платформу** | **€2,000/год** |
| **ROI** | **450%** |

---

## 6. Риски и митигация

| Риск | Вероятность | Митигация |
|------|-------------|-----------|
| Превышение бюджета | Средняя | Настройка алертов на 80% лимита |
| Рост объёмов данных | Высокая | Serverless автомасштабирование |
| Простой сервиса | Низкая | Databricks SLA 99.9% |

---

## 7. План внедрения

| Этап | Срок | Действия |
|------|------|----------|
| 1. Активация | Неделя 1 | Переход на платный тариф Databricks |
| 2. Миграция | Неделя 2 | Перенос данных из Community Edition |
| 3. Тестирование | Неделя 3 | Проверка всех пайплайнов и API |
| 4. Продакшн | Неделя 4 | Запуск для бизнес-пользователей |

---

## 8. Заключение

Запрашивается выделение бюджета в размере **€2,000/год** (≈€170/месяц) на платформу Databricks для MLS Data Platform.

Платформа обеспечит:
- ✅ Централизованное хранение данных о недвижимости
- ✅ Соответствие международному стандарту RESO
- ✅ Интеграцию с Power BI и внешними системами
- ✅ Автоматическую синхронизацию с Qobrix CRM
- ✅ ROI ~450% за счёт автоматизации

---

**Согласования:**

| Роль | ФИО | Подпись | Дата |
|------|-----|---------|------|
| Технический директор | | | |
| Финансовый директор | | | |
| Генеральный директор | | | |

---

*Документ подготовлен на основе реальных данных системы MLS 2.0*

---

## 9. Бюджет на подрядчика: Power BI отчётность

### 9.1 Среднерыночные ставки (2024)

| Регион | Уровень | Ставка/час | Ставка/день |
|--------|---------|------------|-------------|
| **Россия** | Junior | €15-25 | €120-200 |
| **Россия** | Middle | €30-45 | €240-360 |
| **Россия** | Senior | €50-80 | €400-640 |
| **Кипр/Европа** | Middle | €50-80 | €400-640 |
| **Кипр/Европа** | Senior | €80-120 | €640-960 |
| **Германия** | Senior | €100-150 | €800-1,200 |

*Источник: SkillStaff, Upwork, Toptal, локальные агентства*

### 9.2 Планируемый объём работ

#### Фаза 1: Первоначальная разработка (2-3 месяца)

| Задача | Часы | Описание |
|--------|------|----------|
| Анализ требований | 16 | Сбор требований, определение KPI |
| Проектирование модели данных | 24 | Семантическая модель, связи, меры |
| **Дашборд: Обзор портфеля** | 40 | Общая статистика, карта объектов, воронка |
| **Дашборд: Продажи** | 32 | Динамика продаж, конверсия, средний чек |
| **Дашборд: Аренда** | 24 | Арендные ставки, заполняемость |
| **Дашборд: Агенты** | 24 | Эффективность агентов, рейтинг |
| **Дашборд: Девелопмент** | 24 | Проекты, стадии строительства |
| **Дашборд: Клиенты** | 24 | Сегментация, LTV, источники |
| Настройка безопасности | 8 | RLS (Row-Level Security), роли |
| Оптимизация производительности | 16 | DAX оптимизация, инкрементальное обновление |
| Документация и обучение | 16 | Руководство пользователя, тренинг |
| **Итого Фаза 1** | **248 часов** | |

#### Фаза 2: Развитие и поддержка (ежемесячно)

| Задача | Часы/месяц | Описание |
|--------|------------|----------|
| Новые отчёты и доработки | 8-16 | По запросам бизнеса |
| Исправление ошибок | 4-8 | Баги, несоответствия данных |
| Оптимизация | 4 | Улучшение производительности |
| Консультации | 4-8 | Помощь пользователям |
| **Итого в месяц** | **20-36 часов** | |

### 9.3 Бюджет на подрядчика

#### Вариант A: Подрядчик из России/СНГ (удалённо)

| Статья | Расчёт | Стоимость |
|--------|--------|-----------|
| **Фаза 1 (разработка)** | 248 часов × €35/час | **€8,680** |
| **Фаза 2 (поддержка/год)** | 25 часов × 12 мес × €35/час | **€10,500** |
| **Итого первый год** | | **€19,180** |
| **Последующие годы** | | **€10,500/год** |

#### Вариант B: Подрядчик из Кипра/ЕС

| Статья | Расчёт | Стоимость |
|--------|--------|-----------|
| **Фаза 1 (разработка)** | 248 часов × €70/час | **€17,360** |
| **Фаза 2 (поддержка/год)** | 25 часов × 12 мес × €70/час | **€21,000** |
| **Итого первый год** | | **€38,360** |
| **Последующие годы** | | **€21,000/год** |

#### Вариант C: Смешанный (рекомендуемый)

| Статья | Расчёт | Стоимость |
|--------|--------|-----------|
| **Фаза 1: Senior консультант (ЕС)** | 40 часов × €100/час | €4,000 |
| **Фаза 1: Middle разработчик (СНГ)** | 208 часов × €35/час | €7,280 |
| **Фаза 2: Поддержка (СНГ)** | 25 часов × 12 мес × €35/час | €10,500 |
| **Итого первый год** | | **€21,780** |
| **Последующие годы** | | **€10,500/год** |

### 9.4 Лицензии Power BI

| Лицензия | Пользователей | Цена/мес | Цена/год |
|----------|---------------|----------|----------|
| Power BI Pro | 5 | €9.40 × 5 = €47 | **€564** |
| Power BI Pro | 10 | €9.40 × 10 = €94 | **€1,128** |
| Power BI Premium Per User | 5 | €18.70 × 5 = €93.50 | **€1,122** |

*Рекомендуется: Power BI Pro для 5-10 ключевых пользователей*

### 9.5 Итоговый бюджет: Power BI

| Компонент | Год 1 | Год 2+ |
|-----------|-------|--------|
| Подрядчик (Вариант C) | €21,780 | €10,500 |
| Лицензии Power BI Pro (10 польз.) | €1,128 | €1,128 |
| **Итого Power BI** | **€22,908** | **€11,628** |

### 9.6 Планируемые дашборды

| № | Дашборд | Целевая аудитория | Ключевые метрики |
|---|---------|-------------------|------------------|
| 1 | **Executive Overview** | Руководство | Общий портфель, выручка, динамика |
| 2 | **Sales Performance** | Отдел продаж | Конверсия, средний чек, план/факт |
| 3 | **Rental Analytics** | Отдел аренды | Ставки, заполняемость, доходность |
| 4 | **Agent Scorecard** | HR, Руководители | KPI агентов, рейтинг, комиссии |
| 5 | **Development Projects** | Девелопмент | Стадии, PropertyClass, DevelopmentStatus |
| 6 | **Customer Insights** | Маркетинг | Сегменты, источники, LTV |
| 7 | **Geographic Analysis** | Аналитики | Карта объектов, цены по районам |
| 8 | **Market Trends** | Стратегия | Тренды рынка, сравнение конкурентов |

---

## 10. Сводный бюджет проекта

### Первый год

| Компонент | Стоимость (EUR) |
|-----------|-----------------|
| Databricks (платформа данных) | €2,000 |
| Power BI подрядчик (разработка + поддержка) | €21,780 |
| Power BI лицензии (10 пользователей) | €1,128 |
| **Итого Год 1** | **€24,908** |

### Последующие годы

| Компонент | Стоимость (EUR) |
|-----------|-----------------|
| Databricks (платформа данных) | €2,000 |
| Power BI подрядчик (поддержка) | €10,500 |
| Power BI лицензии | €1,128 |
| **Итого Год 2+** | **€13,628** |

### ROI с учётом Power BI

| Фактор | Экономия/год |
|--------|--------------|
| Автоматизация синхронизации | €6,000 |
| Единая отчётность (вместо Excel) | €5,000 |
| Ускорение принятия решений (+28%) | €8,000 |
| Снижение ошибок | €3,000 |
| **Итого экономия** | **€22,000/год** |
| **Затраты (Год 2+)** | **€13,628/год** |
| **Чистая выгода** | **€8,372/год** |
| **ROI** | **61%** |

---

**Запрашиваемый бюджет:**

| Год | Сумма (EUR) | Комментарий |
|-----|-------------|-------------|
| **Год 1** | **€25,000** | Databricks + Power BI разработка |
| **Год 2+** | **€14,000** | Databricks + Power BI поддержка |

